# ----------------------------
# Eyes: HTTP + HTTPS Config
# ----------------------------

# HTTP redirect to HTTPS
<VirtualHost *:80>
    ServerName localhost
    DocumentRoot /opt/eyes/www

    # Redirect all traffic to HTTPS
    Redirect "/" "https://localhost/"

    ErrorLog ${APACHE_LOG_DIR}/eyes_http_error.log
    CustomLog ${APACHE_LOG_DIR}/eyes_http_access.log combined
</VirtualHost>

# HTTPS VirtualHost
<VirtualHost *:443>
    ServerName localhost
    DocumentRoot /opt/eyes/www

    <Directory /opt/eyes/www>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>

    # SSL settings (self-signed)
    SSLEngine on
    SSLCertificateFile /etc/ssl/certs/eyes.crt
    SSLCertificateKeyFile /etc/ssl/private/eyes.key

    ErrorLog ${APACHE_LOG_DIR}/eyes_ssl_error.log
    CustomLog ${APACHE_LOG_DIR}/eyes_ssl_access.log combined
</VirtualHost>
